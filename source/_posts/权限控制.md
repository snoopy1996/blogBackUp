---
title: 权限控制
date: 2018-07-28 21:46:16
tags: [权限控制, 前端, js, 技术]
---

### 用户-角色-权限-api

- 每个用户有多个角色
- 每个角色拥有多个权限
- 每个权限对应一组 api

<!--more-->

比如，**user01** 拥有 **用户管理员** 角色，此 角色 拥有对系统中各个用户的**增删改查**的权限， 而对用户进行增删改查的前提则是 进入**用户管理页面**。

所以，可以如下划分：

```JSON
[
    "user01": {
        "roles": [
           {
               "userManager": [
                   {
                       "viewUserPage": {}
                   },
                   {
                       "addUser": {}
                   },
                   {
                       "deleteUser": {}
                   },
                   {
                       "updateUser": {}
                   },
                   {
                       "findUser": {}
                   }
               ]
           }
        ]
    }
]
```

**权限**在界面上的显示就是进入某个页面以及页面上相应元素的显示隐藏。

权限与 api 的对应关系则也要通过界面的实际逻辑进行绑定，如果某角色拥有增加用户的权限，那么他拥有的 api 实际**是查找所有用户，以及与添加用户有关的所有的 api**，同时要有进入用户管理界面的权限。

### 前端具体实现

首先，前端拥有一个独立的权限配置文件，里面包含所有数据库级别的操作权限以及各个界面的权限，以 用户管理 为例：

```JSON
    "permission": {
        // 进入用户管理界面
        "viewUser": "02fafcda-6d9c-4014-831e-bf5351892e83",
        // 显示增加用户按钮
        "addUser": "f0b76f19-fb43-436d-9c5d-4d9c5eb294d1",
        // 显示删除用户按钮
        "deleteUser": "54b98daf-09c2-4636-ab11-dfe31513825d",
        // 更新用户信息按钮
        "updateUser": "36e1c4df-915c-4f98-88e8-37f71d389d26",
        // 用户查找输入框显示
        "findUser": "65430d99-0065-4b6d-8b35-1742147f0090"
    }
```

#### 关于路由的生成与加载

![](https://ws1.sinaimg.cn/large/0064OUUqly1fqpahjswihj30ag0fq0ta.jpg)
